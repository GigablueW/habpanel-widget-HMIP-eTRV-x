{
    "template": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <title>Widget for HmIP-eTRV-2</title>\n  <meta charset=\"utf-8\"></meta>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"></meta>\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"></link>\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n  <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n</head>\n<body>\n  <script type=\"text/ng-template\" id=\"mySetTemp.html\">\n    <!-- Set Point -->\n    <div ng-init=\"setpointmodel={ \n                  name: 'Setpoint', \n                  item: config.genericname+'_TempSet', \n                  floor: 10, \n                  ceil: 35, \n                  step: 0.5,\n                  hidelabel: true,\n                  unit: '°C'\n                  }\">\n      <widget-slider ng-model=\"setpointmodel\"></widget-switch>\n    </div>\n  </script>\n  <widget-icon ng-if=\"config.backdrop\" iconset=\"config.backdrop_iconset\" icon=\"config.backdrop\"\n               backdrop=\"true\" center=\"true\">\n  </widget-icon>\n\t<h5  ng-if=\"ngModel.name\">\n  {{ngModel.name}}\n  </h5>\n\n  <div class=\"row\">\n    <div class=\"col-xs-4\">\n      <span>\n        <widget-icon iconset=\"'eclipse-smarthome-classic'\"  icon=\"'heating'\" \t\t size=\"32\" state=\"(itemValue(config.genericname+'_TempSet')-config.minTemp)*100/(config.maxTemp-config.minTemp)\" />\n      </span>TempSet\n    </div>\n    <div class=\"col-xs-4\" ng-if=\"(itemValue(config.genericname+'_TempAct') - itemValue(config.genericname+'_TempSet')) > 0.5\">\n      <span>\n      \t<widget-icon iconset=\"'custom-icon'\"    \t\t\t\t\t  icon=\"'thermometer'\" size=\"32\" state=\"'hot'\"/>\n      </span>TempAct\n    </div>\n    <div class=\"col-xs-4\" ng-if=\"(itemValue(config.genericname+'_TempSet') - itemValue(config.genericname+'_TempAct') < 0.6) && (itemValue(config.genericname+'_TempAct') - itemValue(config.genericname+'_TempSet') < 0.6)\">\n      <span>\n      \t<widget-icon iconset=\"'custom-icon'\"    \t\t\t\t\t  icon=\"'thermometer'\" size=\"32\" state=\"'warm'\"/>\n      </span>TempAct\n    </div>\n    <div class=\"col-xs-4\" ng-if=\"(itemValue(config.genericname+'_TempSet') - itemValue(config.genericname+'_TempAct')) > 0.5\">\n      <span>\n      \t<widget-icon iconset=\"'custom-icon'\"    \t\t\t\t\t  icon=\"'thermometer'\" size=\"32\" state=\"'cold'\"/>\n      </span>TempAct\n    </div>\n    <div class=\"col-xs-4\">\n      <span>\n        <widget-icon iconset=\"'custom-icon'\" \t\t\t\t\t\t\t\ticon=\"'window'\"  \t\t size=\"32\" state=\"itemValue(config.genericname+'_WindowState')\"/>\n      </span>Window\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-xs-4\">\n      <span style=\"color: red;  font-size: 10pt\">\n        <button class=\"btn btn-link btn-sm\"\n          ng-click=\"openModal('mySetTemp.html', true, 'lg')\">\n          {{itemValue(config.genericname+'_TempSet')}}°C\n        </button>\n      </span>\n    </div>\n    <div class=\"col-xs-4\">\n      <span style=\"color: cyan; font-size: 10pt\">{{itemValue(config.genericname+'_TempAct')}}°C\n      </span>\n    </div>\n    <div class=\"col-xs-4\">\n      <span style=\"color: blue; font-size: 10pt\">{{itemValue(config.genericname+'_WindowState')}}\n      </span>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"btn-group\" uib-dropdown dropdown-append-to-body=\"true\"\n         ng-init=\"Profiles = [\n          {\n            'value': '1',\n            'label': 'normal',\n            'myicon': 'glyphicon glyphicon-record'\n          },\n          {\n            'value': '2',\n            'label': 'absense',\n            'myicon': 'glyphicon glyphicon-road'\n          },\n                   {\n            'value': '3',\n            'label': 'vacation',\n            'myicon': 'glyphicon glyphicon-home'\n          },\n        ]\">\n      <div class=\"btn-group btn-group-justified\" btn-checkbox-true >\n        <label class=\"btn-xs btn-primary\" ng-model=\"itemValue(config.genericname+'_Profile')\" uib-btn-radio=\"option.value\"\n                    ng-click=\"sendCmd(config.genericname+'_Profile, option.value)\" ng-repeat=\"option in Profiles\">\n        \t<span class={{option.myicon}} aria-hidden=\"true\">\n          </span> {{option.label}}\n        </label>\n      </div >  \n    </div>\n  </div>\n  \n  <div class=\"row\">\n    <div class=\"col-xs-4\" style=\"color: cyan; font-size: 8pt; font-weight: bold\" ng-if=\"itemValue(config.genericname+'_BatteryStatus') == 'ON'\">\n      <span>\n      \t<widget-icon iconset=\"'eclipse-smarthome-classic'\"  icon=\"'lowbattery'\" size=\"24\" />\n      </span>battery low\n    </div>\n    <div class=\"col-xs-4\" style=\"color: cyan; font-size: 8pt; font-weight: bold\" ng-if=\"itemValue(config.genericname+'_UpdatePending') == 'ON'\">\n      <span>\n      \t<widget-icon iconset=\"'eclipse-smarthome-classic'\"  icon=\"'settings'\" \tsize=\"24\" />\n      </span>new firmware\n    </div>\n    <div class=\"col-xs-4\" style=\"color: cyan; font-size: 8pt; font-weight: bold\" ng-if=\"itemValue(config.genericname+'_PartyMode') == 'ON'\">\n      <span>\n      \t<widget-icon iconset=\"'eclipse-smarthome-classic'\"  icon=\"'party'\" \t\t  size=\"24\" />\n      </span>partymode\n    </div>\n    <div class=\"col-xs-4\" style=\"color: cyan; font-size: 8pt; font-weight: bold\" ng-if=\"itemValue(genericname+'_BoostTime') > 0\">\n      <span>\n      \t<widget-icon iconset=\"'eclipse-smarthome-classic'\"  icon=\"'party'\" \t\t  size=\"24\" />\n      </span>Boost active for {{itemValue(genericname+'_BoostTime')}}sec\n    </div>\n  </div>\n </body>\n</html>\n",
    "name": "eTRV-2 widget for Homematic-IP",
    "author": "Michael Rossner",
    "description": "Manipulate the HmIP-eTRV-2 Homematic-IP element",
    "settings": [
        {
            "type": "string",
            "id": "genericname",
            "label": "GenericName",
            "description": "Add generic name of item. Items with names <generic>+(_TempAct, _TempSet, _BatteryStatus, _UpdatePending, _BoostMode, _PartyMode) are required"
        },
        {
            "type": "icon",
            "id": "backdrop",
            "label": "Icon",
            "description": "Background Icon"
        },
        {
            "type": "number",
            "id": "minTemp",
            "label": "minimal temperature",
            "default": "12",
            "description": "minimum temperature of the thermostat"
        },
        {
            "type": "number",
            "id": "maxTemp",
            "label": "maximum temperature",
            "default": "30",
            "description": "minimum temperature of the thermostat"
        }
    ]
}